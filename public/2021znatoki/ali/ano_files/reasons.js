!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).reasons={})}(this,(function(e){"use strict";var n=function(){return(n=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)},t=Math.pow(36,9),o=35*t-1,r={handler:"/aer-reasons/",service:"",details:{},payload:{}};function a(e){var t=r.handler,o=r.service,a=r.details,i=r.payload,d=n(n({},e),{details:a,payload:n(n({},i),e.payload)});fetch(t+o,{method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify(d)}).catch((function(e){console.error("Couldn't send a message to reason server",e)}))}var i,d=!1;function s(e,t){d!==!!e&&((d=!!e)?(i=function(){if(!(Math.random()>=t)){var e=function(){var e,n,t=null===(e=window.performance)||void 0===e?void 0:e.getEntriesByType("navigation")[0],o=null===(n=window.performance)||void 0===n?void 0:n.timing;if(!t||!o)return null;var r=t.requestStart,a=t.responseStart,i=t.responseEnd,d=o.domInteractive,s=o.domComplete,l=o.navigationStart,c={download_time:i&&r?i-r:0,time_to_first_byte:a&&r?a-r:0,first_contentful_paint:0,first_paint:0,time_to_rendering:s&&l?s-l:0,time_to_dom_interactive:d&&l?d-l:0};return window.performance.getEntriesByType("paint").forEach((function(e){var n=e.name,t=e.startTime;"first-contentful-paint"===n&&(c.first_contentful_paint=t),"first-paint"===n&&(c.first_paint=t)})),[c,{requestStart:r,responseStart:a,responseEnd:i,domInteractive:d,domComplete:s,navigationStart:l}]}();e&&a({code:"PERF",message:"",perf:e[0],payload:n({},e[1])})}},window.addEventListener("beforeunload",i)):i&&window.removeEventListener("beforeunload",i))}function l(e){var n=e.error,t=e.filename,o=e.lineno,r=e.colno;a({message:((null==n?void 0:n.message)||n)+" at "+t+":"+o+":"+r,code:"UNHANDLED",stack:n?n.stack:void 0})}function c(e){var n=e.reason;a({message:null==n?void 0:n.message,code:"UNHANDLED_PROMISE",stack:null==n?void 0:n.stack,payload:{reason:n?JSON.stringify(n):void 0}})}var f=!1;function v(e){f!==!!e&&((f=!!e)?(window.addEventListener("error",l),window.addEventListener("unhandledrejection",c)):(window.removeEventListener("error",l),window.removeEventListener("unhandledrejection",c)))}e.reasonsInit=function(e){var a=e.trackClientPerf,i=void 0!==a&&a,d=e.trackClientPerfRate,l=void 0===d?1:d,c=e.trackUnhandled,f=void 0===c||c;if(!e.service)throw new Error("Please provide service name for Reasons");!function(e){var a=e.handler,i=e.service,d=e.details,s=e.payload;r={handler:void 0!==a?a+(a.endsWith("/")?"":"/"):r.handler,service:i||r.service,details:n(n(n({},r.details),{url:window.location.href,reason_id:Math.floor(Math.random()*o+t).toString(36)}),d),payload:n(n({},r.payload),s)}}(e),v(f),s(i,l)},e.sendReason=a,e.trackUnhandledErrors=v,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=reasons.js.map